<?php
$Autor= "yo";$Titulo= "localhost2";$Fecha= "2015-02-10";$Texto= "prueba";
        $server = "localhost";
        $user = "root";
        $pass = "9psCXanh";
        $db = "blog";
// Create connection
        $conn = new mysqli($server, $user, $pass, $db);
//conectamos
        if ($conn->connect_error) {
            echo "<h2>";
            die("Connection failed: " . $conn->connect_error);
            echo "</h2>";
        } else {
//preparamos sentencia
/*$peticion=("INSERT INTO blog (autor, titulo, fecha, texto) VALUES (?, ?, ?, ?)");
$stmt = mysqli->prepare($peticion);*/
            if (!$sentencia = mysqli_prepare($conn,("INSERT INTO blog (autor, titulo, fecha, texto) VALUES (?, ?, ?, ?)"))) {
                echo "Falló la preparación: (" . $conn->errno . ") " . $conn        ->error;
            } else {echo "bien1\n";}
//vinculamos sentencia
//$stmt->bind_param("ss",$Autor, $Titulo, $Fecha, $Texto);
if (!(mysqli_stmt_bind_param($sentencia,"ssss",$Autor, $Titulo, $Fecha, $Texto))){
echo "fallo al vincular\n";} else {echo "no fallo al vincular\n";}
           /* if (!$sentencia->bindParam(1, $Autor)) {
                echo "Falló la vinculación de parámetros: (" . $sentencia->errno . ") " . $sentencia->error;
            } else {echo "bien2\n";}
            if (!$sentencia->bindParam(2, $Titulo)) {
                echo "Falló la vinculación de parámetros: (" . $sentencia->errno . ") " . $sentencia->error;
            } else {echo "bien3\n";}
            if (!$sentencia->bindParam(3, $Fecha)) {
                echo "Falló la vinculación de parámetros: (" . $sentencia->errno . ") " . $sentencia->error;
            } else {echo "bien4\n";}
            if (!$sentencia->bindParam(4, $Texto)) {
                echo "Falló la vinculación de parámetros: (" . $sentencia->errno . ") " . $sentencia->error;
            } else {echo "bien5\n";}*/
//ejecutamos sentencia
/*$stmt->execute();
$stmt->close();*/
if (!(mysqli_stmt_execute($sentencia))){echo "fallo al ejecutar\n";} else {echo "no fallo al ejecutar\n";}
if (!(mysqli_stmt_close($sentencia))){echo "fallo al cerrar\n";} else {echo "no fallo al cerrar\n";}
           /* if (!$sentencia->execute()) {
                echo "Falló la ejecución: (" . $sentencia->errno . ") " . $sentencia->error;
                return "false";
            } else {
                return "true";
            }*/

        }
$conn->close();

?>
